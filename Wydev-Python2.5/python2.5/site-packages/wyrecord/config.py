# -*- coding: utf-8 -*- 
#
# Description:
#
# WyRecord Config Class Class Definition
#
#
#
# Changes:
#
# 2014-03-26
# Initial Commit
#
#
# Copyright 2010-2014, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.


URL_PREFIX_TIMESHIFT = 'rwchunk://'
URL_PREFIX_REC_TIMESHIFT = 'rwchunk://'
URL_PREFIX_UNIX_SOCKET = 'unix://'
URL_PREFIX_UDP_SOCKET = 'udp://'
URL_PREFIX_REC_PLAY = 'rec://'
RECORD_INFO_FILE_NAME_SUFFIX = '.xml'
RECORD_INFO_FILE_NAME_MULTIPLE_FILE_NAME = 'record' + RECORD_INFO_FILE_NAME_SUFFIX
APM_STATE_READY = 0
APM_STATE_STANDBY = 1
APM_STATE_SUSPEND = 2
APM_STATE_OFF = 3


# Conflig class implementation
class Config(object):
	
	def __init__(self):
		self.autoconf_tuner = True
		self.nb_virtual_tuner = 1
		self.disk_device = '/wymedia'
		self.base_timeshift = '/wymedia/timeshift'
		self.wyplay_server_path = '/tmp/wyscansock'
		self.dummy_wyscan = False
		self.scheduler_start_delay = 12
		self.record_start_padding = 30
		self.record_stop_padding = 30
		self.max_start_delay = 300
		self.pre_start_alert_delay = 60
		self.recordings_list_file = self.base_timeshift + '/myrecords.fxd'
		self.recording_list_save_period = 30
		self.recording_use_live = True
		self.max_simultaneous_rec = self.nb_virtual_tuner
		self.multiple_recording_per_live = False
		self.resolve_conflict = True
		self.auto_adjust_instant_record_stop_time = True
		self.records_folder = self.base_timeshift + '/records'
		self.unix_socket_folder_path = self.base_timeshift + '/recordsocks'
		self.timeshift_chunk_max_size = 20971520
		self.timeshift_base_folder_path = self.base_timeshift + '/timeshift'
		self.timeshift_live_name = 'live'
		self.timeshift_chunk_file_base_name = 'chunk_'
		self.timeshift_chunk_file_index_format = '%08d'
		self.timeshift_chunk_file_extention = '.ts'
		self.timeshift_chunk_file_name_format = self.timeshift_chunk_file_base_name + self.timeshift_chunk_file_index_format + self.timeshift_chunk_file_extention
		self.timeshift_records_base_folder_path = self.records_folder
		self.live_count_max = self.nb_virtual_tuner
		self.live_mode = 0
		self.live_mode_auto_switch_period = 0
		self.delta_time_for_playing = 1
		self.stop_timeshift_on_zap = True
		self.asynchronous_zap = False
		self.wyplayer_dbus_bus_name = 'com.wyplay.wyplayer'
		self.wyplayer_dbus_path_name = '/com/wyplay/WyPlayer'
		self.wyplayer_dbus_record_path_name = '/com/wyplay/WyPlayer/Record'
		self.wyscan_dbus_bus_name = 'com.wyplay.wyscan'
		self.wyscan_dbus_path_name = '/com/wyplay/WyScan'
		self.wyrecord_dbus_bus_name = 'com.wyplay.wyRecord'
		self.wyrecord_dbus_bus_name_no_loop = 'com.wyplay.wyRecord.bis'
		self.wyrecord_dbus_path_name = '/com/wyplay/WyRecord'
		self.wycrs_dbus_bus_name = 'com.wyplay.wycrs'
		self.standby_dbus_bus_name = self.wycrs_dbus_bus_name
		self.standby_dbus_path_name = '/com/wyplay/wycrs/wystandby'
		self.space_manager_dbus_bus_name = self.wycrs_dbus_bus_name
		self.space_manager_dbus_path_name = '/com/wyplay/wycrs/wyspacemanager'
		self.wyclock_dbus_bus_name = self.wycrs_dbus_bus_name
		self.wyclock_dbus_path_name = '/com/wyplay/wycrs/wyclock'
		self.wystandby_id = 'wyrecord'
		self.wyplayer_extern_eit_path = '/tmp/eit_data.sock'
		self.disk_space_manager_active = True
		self.disk_usage_check_period = 30
		self.max_size_for_timeshift = self.timeshift_chunk_max_size * 200
		self.min_size_for_timeshift = self.timeshift_chunk_max_size * 50
		self.size_error_before_allocation = self.timeshift_chunk_max_size * 10
		self.max_percentage_disk_use = 98
		self.average_bitrate = 5
		self.bytes_per_sec = self.average_bitrate * 1024 * 1024 / 8
		self.wyscan_config_file = '/etc/wyscansvr.conf'
		self.asynchronous_chunk_removal = True
		self.recover_string = ''
		self.manage_macrovision = True



config = Config()
