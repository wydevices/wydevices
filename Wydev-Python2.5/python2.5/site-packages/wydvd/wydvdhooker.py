# -*- coding: utf-8 -*- 
#
# Description:
#
#  Definiton of WyDVD Proxy class
#
#
#
# Changes:
#
# 2012-03-23
# Initial Commit
#
#
# Copyright 2010-2012, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.

from __future__ import absolute_import
from wydvd.timerhooker import TimerHookProxy

__all__ = ['WydvdHookProxy']



# Proxy for WyDVD
class WydvdHookProxy(TimerHookProxy):

	def __init__(self, *args, **kwds):
		TimerHookProxy.__init__(self, *args, **kwds)
		print >> self._file, '#!/usr/bin/python2.5\nfrom wydvd import Wydvd\nfrom wydvd.dvdchecker import *\nimport time\nimport sys\n'
		print >> self._file, '%s = Wydvd()' % self._objname
		return None

	def _pre(self, name, *args, **kwds):
		if name != 'register_callback':
			TimerHookProxy._pre(self, name, *args, **kwds)
		return None

	def _post(self, name, *args, **kwds):
		TimerHookProxy._post(self, name, *args, **kwds)
		if len(name.split('get_')) > 1:
			rval = kwds['rval_intercepted']
			print >> self._file, 'check_%s(rval, %s)' % (name.split('get_')[-1], rval)
		return None
