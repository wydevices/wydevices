# -*- coding: utf-8 -*- 
#
# Description:
#
# Playlist Editor Menu Definiton
#
#
#
# Changes:
#
# 2012-04-11
# Initial Commit
#
#
# Copyright 2010-2012, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.

from __future__ import absolute_import

__all__ = ['PlaylistEditor']

from pygui.menu.menu.core import Menu
from pygui.eventmanager.menus import PlaylistEditorEventHandler, FavoriteEditorEventHandler
from wymedia.wmplus import BrowseError



class PlaylistEditor(Menu):

	groupeable = True

	def __init__(self, name=_('Playlist editor'), playlist=None, type='playlist_editor', **kw):
		self.playlist = playlist
		try:
			playlist = playlist.browse()
		except BrowseError:
			playlist = []
		self.eventhandler = PlaylistEditorEventHandler(self)
		Menu.__init__(self, name=name, choices=playlist, type=type, **kw)
		return None

	def select(self, item, list_name=None, force_pos=False):
		try:
			Menu.select(self, item, list_name, force_pos)
		except BrowseError:
			self.hide()
		return None



# Cosmetic variation on the playlist editor, used to edit TV favorites.
class FavoriteEditor(PlaylistEditor):

	def __init__(self, name=_('Favorite editor'), playlist=None, type='tv_favorite_editor', **kw):
		PlaylistEditor.__init__(self, name, playlist, type, **kw)
		self.eventhandler = FavoriteEditorEventHandler(self)
		return None
