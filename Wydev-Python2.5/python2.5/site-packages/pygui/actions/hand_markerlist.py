# -*- coding: utf-8 -*- 
#
# Description:
#
# Actions Hand Marker List Class Definition
#
#
#
# Changes:
#
# 2014-04-07
# Initial Commit
#
#
# Copyright 2010-2014, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.


from __future__ import absolute_import

name = 'Markerlist'
position = 2
image = 'hand_markerlist'
category = 'navigator'
default = False
unique = False

from pygui.markerlist import get_marker_from_item, actions, markerlists
from pygui.window import LoadingWindow
from pygui.actions.jobs.marker import execute_show_marker
from pygui.item.core import ActionItem
from pygui.config import user_config


def is_available(context):
	fl = markerlists().get(context['menu'].universe)
	return bool(fl)


def get_action_info_list(context):
	if context is None:
		return []
	if context['menu'].type in ('image', 'video', 'video_image'):
		menu_video_photo = True
	else:
		menu_video_photo = False
	if context['menu'].type in ('audio',):
		menu_music = True
	else:
		menu_music = False
	fl = markerlists().get(context['menu'].universe)
	fl.menu = context['menu']
	act = [ActionItem(_('Display marker list'), type_='action', action=execute_show_marker, args=(context, fl))]
	for plugin_name in ('marker_empty', 'marker_delete', 'marker_play'):
		plugin_action = actions[plugin_name]
		if user_config['security']['parental_control']:
			context['parent_mode'] = user_config['security']['parent_mode']
		else:
			context['parent_mode'] = True
		if plugin_action.is_compatible(context):
			act.append(ActionItem(_(plugin_action.caption), type_='action', action=plugin_action.execute, args=(context,)))
	return act
