# -*- coding: utf-8 -*- 
#
# Description:
#
# Actions Jobs Marker Class Definition
#
#
#
# Changes:
#
# 2014-04-07
# Initial Commit
#
#
# Copyright 2010-2014, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.


from __future__ import absolute_import

from pygui.window import KeyboardWindow, ConfirmWindow, LoadingWindow, NoHomeProgressWindow
from pygui.shared import pygui_globs
from pygui.actions.jobs.fs import GraphicalProgress, CopyThread
from pygui.item.containers import ActionContainer
from wymedia.wmplus import BrowseError


def execute_show_marker(context, marker):
	context['parent'].show_menu()
	loader = LoadingWindow()
	loader.show()
	marker.menu = context['menu']
	from pygui.menu import menu
	try:
		item_list = marker.browse()
	except BrowseError:
		pass
	finally:
		item_menu = menu.MarkerNavigator(_('Marker list'), context['menu'].universe, item_list, context['parent'], marker, type='marker' + marker.menu.type)
		pygui_globs['menustack'].push_menu(item_menu)
	loader.hide()
	return None


def execute_copy_marked_items(context, marker):
	from pygui.item.mediaitem.core import Playlist
	if isinstance(context, Playlist):
		context.vfs_add_item(marker)
		pygui_globs['menustack'].back_one_menu()
	else:
		GraphicalProgress(job=CopyThread(marker, context), context=context, win=NoHomeProgressWindow()).start(delay=1)
	return None


def execute_burn_marker_list(context, marker):
	return None
