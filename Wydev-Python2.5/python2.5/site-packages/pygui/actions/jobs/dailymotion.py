# -*- coding: utf-8 -*- 
#
# Description:
#
# Change DailyMotion Video Format Item Class Definition
#
#
#
# Changes:
#
# 2011-11-19
# Initial Commit
#
#
#
# Copyright 2010-2014, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.


from pygui.item.containers import ActionContainer
from pygui.facilities.l10n import UnicodeDict
from pygui.facilities.codemapping import dailymotion_format_dict



class ChangeDailyMotionVideoFormatItem(ActionContainer):
	
	def __init__(self, name, item, menu, **kw):
		self.item = item
		self.item.media_update()
		self.actions_dict = dict()
		ActionContainer.__init__(self, name=name, type_='action', menu=menu, **kw)
		self.radio = True
		pos = 0
		for format in self.item.available_formats:
			caption = dailymotion_format_dict.get(format)
			self.actions_dict[format] = dict(handler=self.set_dailymotion_format, caption=caption, checked=format in self.item.choosen_format, pos=pos, args=(format,), kwargs=dict())
			pos += 1

	def set_dailymotion_format(self, format):
		self._update_checked(format)
		self.item.choosen_format = format
		self.menu._set_options_list(keep_selection=True)
