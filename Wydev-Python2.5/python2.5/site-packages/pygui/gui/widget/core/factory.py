# -*- coding: utf-8 -*- 
#
# Description:
#
# GUI Widget Core Factory Definiton
#
#
#
# Changes:
#
# 2012-05-02
# Initial Commit
#
#
# Copyright 2010-2012, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.

from __future__ import absolute_import



class Factory(object):

	# register a constructor
	def register(self, methodName, constructor, *args, **kargs):
		_args = [constructor] + list(args)
		setattr(self, methodName, apply(Functor, _args, kargs))
		return None

	# unregister a constructor
	def unregister(self, methodName):
		delattr(self, methodName)
		return None

	__slots__ = ['__dict__']



class Functor(object):

	def __init__(self, function, *args, **kargs):
		self._function = function
		self._args = args
		self._kargs = kargs
		return None

	# call function
	def __call__(self, *args, **kargs):
		_args = list(self._args) + list(args)
		_kargs = self._kargs.copy()
		_kargs.update(kargs)
		return apply(self._function, _args, _kargs)

	__slots__ = ['__dict__', '_args', '_kargs', '_function']


