# -*- coding: utf-8 -*- 
#
# Description:
#
# Search Config Class Definiton
# Save youtube and shoutcast searchs to "/wymedia/usr/etc/search.conf" file
#
#
# Changes:
#
# 2012-01-08
# Initial commit.
#
#
# Copyright 2010-2012, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.


import ConfigParser



class YoutubeConfig(object):

	def __init__(self):
		self.config = ConfigParser.ConfigParser()
		self.config.optionxform = str
		self.config.read('/wymedia/usr/etc/search.conf')
		self.user_rank = len(self.GetUsers())
		self.search_rank = len(self.GetSearchs())

	def AddUser(self, username):
		if not self.config.has_section('Youtube Users'):
			self.config.add_section('Youtube Users')
		if not username in self.GetUsers():
			self.config.set('Youtube Users', username, self.user_rank)
			self.user_rank += 1
			configfile = open('/wymedia/usr/etc/search.conf', 'wb')
			self.config.write(configfile)
			configfile.close()

	def DelUser(self, username):
		try:
			self.config.remove_option('Youtube Users', username)
			configfile = open('/wymedia/usr/etc/search.conf', 'wb')
			self.config.write(configfile)
			configfile.close()
		except:
			pass

	def GetUsers(self):
		try:
			self.config.read('/wymedia/usr/etc/search.conf')
			users = self.config.options('Youtube Users')
		except:
			users = []
		return users

	def GetUserRank(self, username):
		try:
			self.config.read('/wymedia/usr/etc/search.conf')
			rank = self.config.get('Youtube Users', username)
		except:
			rank = -1
		return rank

	def AddSearch(self, search):
		if not self.config.has_section('Youtube Searchs'):
			self.config.add_section('Youtube Searchs')
		if not search in self.GetSearchs():
			self.config.set('Youtube Searchs', search, self.search_rank)
			self.search_rank += 1
			configfile = open('/wymedia/usr/etc/search.conf', 'wb')
			self.config.write(configfile)
			configfile.close()

	def DelSearch(self, search):
		try:
			self.config.remove_option('Youtube Searchs', search)
			configfile = open('/wymedia/usr/etc/search.conf', 'wb')
			self.config.write(configfile)
			configfile.close()
		except:
			pass

	def GetSearchs(self):
		try:
			self.config.read('/wymedia/usr/etc/search.conf')
			searchs = self.config.options('Youtube Searchs')
		except:
			searchs = []
		return searchs

	def GetSearchRank(self, search):
		try:
			self.config.read('/wymedia/usr/etc/search.conf')
			rank = self.config.get('Youtube Searchs', search)
		except:
			rank = -1
		return rank



class ShoutCastConfig(object):

	def __init__(self):
		self.config = ConfigParser.ConfigParser()
		self.config.optionxform = str
		self.config.read('/wymedia/usr/etc/search.conf')
		self.search_rank = len(self.GetSearchs())

	def AddSearch(self, search):
		if not self.config.has_section('ShouCast Searchs'):
			self.config.add_section('ShouCast Searchs')
		if not search in self.GetSearchs():
			self.config.set('ShouCast Searchs', search, self.search_rank)
			self.search_rank += 1
			configfile = open('/wymedia/usr/etc/search.conf', 'wb')
			self.config.write(configfile)
			configfile.close()

	def DelSearch(self, search):
		try:
			self.config.remove_option('ShouCast Searchs', search)
			configfile = open('/wymedia/usr/etc/search.conf', 'wb')
			self.config.write(configfile)
			configfile.close()
		except:
			pass

	def GetSearchs(self):
		try:
			self.config.read('/wymedia/usr/etc/search.conf')
			searchs = self.config.options('ShouCast Searchs')
		except:
			searchs = []
		return searchs

	def GetSearchRank(self, search):
		try:
			self.config.read('/wymedia/usr/etc/search.conf')
			rank = self.config.get('ShouCast Searchs', search)
		except:
			rank = -1
		return rank
