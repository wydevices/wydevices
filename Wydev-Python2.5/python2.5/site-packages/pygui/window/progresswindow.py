# -*- coding: utf-8 -*- 
#
# Description:
#
# GUI Progress Window Class Definiton
#
#
#
# Changes:
#
# 2012-04-01
# Initial Commit
#
#
# Copyright 2010-2012, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.

from __future__ import absolute_import

__all__ = ['ProgressWindow', 'NoHomeProgressWindow']

from pygui.window.core import Window, gui_updater
from pygui.eventmanager.windows import CancelOnlyEventHandler, NoHomeEventHandler



# A simple window showing a progressbar and misc infos, can be canceled.
class ProgressWindow(Window):

	type = 'progress'
	_progress = 0

	def __init__(self, title='Progress status', description=''):
		Window.__init__(self)
		self.title = title
		self.description = description
		self.total = ''
		self.elapsed = ''
		self.remaining = ''
		self._cancel_fn = None
		self.eventhandler = CancelOnlyEventHandler(self)
		return None

	def set_cancel(self, fn):
		self._cancel_fn = fn
		return None

	def _get_progress(self):
		return self._progress

	@gui_updater
	def _set_progress(self, val):
		self._progress = int(val)
		return None

	progress = property(_get_progress, _set_progress)
	del _get_progress
	del _set_progress



# A progress window with custom eventhandler to avoid some
# operations during progress (home key)
class NoHomeProgressWindow(ProgressWindow):

	def __init__(self, *args, **kw):
		ProgressWindow.__init__(self, *args, **kw)
		self.eventhandler = NoHomeEventHandler(self)
		return None
