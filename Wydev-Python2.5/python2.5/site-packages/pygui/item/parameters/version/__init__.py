# -*- coding: utf-8 -*- 
#
# Description:
#
# Version Parameters Items Class Definitions
#
#
#
# Changes:
#
# 2011-10-02
# Initial Commit
#
# 2011-10-04
# Remove S/N item. (Not needed)
# Add WyDev version item
# This item will allow to launch an update menu. (not yet)
#
#
# Copyright 2010-2012, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.


from __future__ import absolute_import

from peewee import version
from pygui.item.containers import GenericContainer
from pygui.item.parameters import ParametersSetupItem
from pygui.menu.menu.greetings import LicenseMenu

def getitem(menu):
	return VersionConfigurationItem(_('Version'), 'version', display_type='setup_version', menu=menu)



class VersionConfigurationItem(GenericContainer):
	depth = 2

	def browse(self, preview=False):
		c = ParametersSetupItem(name='Copyright', type_='setupitem')
		c.execute = (lambda: LicenseMenu('Licensing', filename='/wymedia/usr/share/doc/licenses.txt').show())
		return [ParametersSetupItem(name='WyDev Version: %s', name_args=version.format_version(version.wydev_version()), type_='setupitem'),
		ParametersSetupItem(name='WyDev Revision: %s', name_args=version.format_version(version.wydev_revision()), type_='setupitem'),
		ParametersSetupItem(name='WyPlay Version: %s', name_args=version.format_version(version.wyplay_version()), type_='setupitem'),
		c]

	def update_name(self):
		self._name = _('Version')
		return None


