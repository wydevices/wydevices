# -*- coding: utf-8 -*- 
#
# Description:
#
# GeneralSetup Parameters Items Entry Point
#
#
#
# Changes:
#
# 2011-10-02
# Initial Commit
#
# 2011-10-20
# Add Screensaver entry
# Allow to modify screensaver behaviour
#
# 2011-11-18
# Add Theme entry
# Allow to set the theme (Wyplayer, Mediatec, Mediatitan, Zoltartv)
#
#
# Copyright 2010-2012, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.


from __future__ import absolute_import

import pygui.config as config

from peewee.debug import PRINT_EXCEPTION
from pygui.facilities import codemapping
from pygui.facilities.l10n import UnicodeDict
from pygui.item.containers import GenericContainer
from pygui.item.parameters import UserConfigSetupItem
from pygui.item.parameters.generalsetup.i18n import OSDLanguageUserConfigSetupItem, CountryUserConfigSetupItem
from pygui.item.parameters.generalsetup.datesetup import DateParametersContainer
from pygui.item.parameters.generalsetup.securitysetup import ProtectionParametersSetupItem
from pygui.item.parameters.generalsetup.screensaver import ScreenSaverParametersSetupItem
from pygui.item.parameters.generalsetup.themes import ThemesParametersSetupItem

def getitem(menu):
	return GeneralConfigurationItem(name=_('General'), type_='general', display_type='setup_general', menu=menu)



class HelpUserConfigSetupItem(UserConfigSetupItem):

	depth = 2
	translation_dict = UnicodeDict({0: 'Never', 1: 'Always', 2: 'During few seconds'})



class GeneralConfigurationItem(GenericContainer):

	def browse(self, preview=False):
		return [CountryUserConfigSetupItem(name='Country', menu=self.menu, domain='base', key='country', choices_list=config.HMI_BASE['country']),
		OSDLanguageUserConfigSetupItem(name='Language', exec_callback=True, menu=self.menu, domain='base', key='language', choices_list=config.HMI_BASE['osd_languages']),
		DateParametersContainer(name='Date and Time', type_='setupitem', menu=self.menu),
		ProtectionParametersSetupItem(name='Access and protections', type_='setupitem', menu=self.menu),
		HelpUserConfigSetupItem(name='Help banner', type_='setupitem', menu=self.menu, domain='base', key='help_banner', choices_list=range(3)),
		ScreenSaverParametersSetupItem(name='Screen saver', type_='setupitem', menu=self.menu),
		ThemesParametersSetupItem(name='Theme', type_='setupitem', menu=self.menu)]

	def update_name(self):
		self._name = _('General')
		return None
