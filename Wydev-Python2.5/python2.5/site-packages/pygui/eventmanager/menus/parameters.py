# -*- coding: utf-8 -*- 
#
# Description:
#
# EventManager Parameters Menu Class Definition
#
#
#
# Changes:
#
# 2014-04-07
# Initial Commit
#
#
# Copyright 2010-2014, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.


from __future__ import absolute_import

from pygui.eventmanager import EventDispatcher
from pygui.eventmanager.menus.core import MenuEventHandler
from peewee.messages import send as louie_send


class ParametersSubMenuEventHandler(EventDispatcher):
	
	def _move(self, val):
		ret = self.player.select(val)
		if ret:
			louie_send(('event_down' if val < 0 else 'event_up'), sender=self.player)
		return True

	def event_up(self, event):
		self._move(-event.arg['count'])
		return True

	def event_wheel_rwd(self, event):
		val = -event.arg['count']
		if self.player.selected_pos + val >= 0:
			self._move(val)
		return True

	def event_down(self, event):
		self._move(event.arg['count'])
		return True

	event_wheel_fwd = event_down
	
	def event_left(self, event):
		self.player.focus_previous()
		return True

	def event_right(self, event):
		self.player.focus_next()
		return True

	def event_select(self, event, list_name='main_list'):
		ac = self.player.active_list
		sel = self.player.get_item_list(ac).selected
		if sel is None:
			return True
		sel.execute()
		return True



class MultipleChoicesMenuEventHandler(MenuEventHandler):
	
	def event_left(self, event):
		self.player.focus_previous()
		return True

	def event_right(self, event):
		self.player.focus_next()
		return True

	def event_select(self, event):
		self.player.selected.execute()
		return True

	def event_stop(self, event):
		self.player.cancel()
		return True



class SecretCodeMenuEventHandler(MultipleChoicesMenuEventHandler):
	
	event_up = MultipleChoicesMenuEventHandler.event_down
	
	event_down = MultipleChoicesMenuEventHandler.event_up
	
	def event_volume_up(self, event):
		return True

	def event_volume_down(self, event):
		return True

	def event_mute(self, event):
		return True
