# -*- coding: utf-8 -*- 
#
# Description:
#
# EventManager Playlist Editor Menu Class Definition
#
#
#
# Changes:
#
# 2014-04-07
# Initial Commit
#
#
# Copyright 2010-2014, WyDev Team.
# Author: Polo35 (polo35580@hotmail.fr)
#
# Licenced under Academic Free License version 3.0
# Review WyGui README & LICENSE files for further details.


from __future__ import absolute_import

from pygui.eventmanager.menu.core import MenuEventHandler
from pygui.shared import pygui_globs


class PlaylistEditorEventHandler(MenuEventHandler):
	
	def event_right(self, event):
		self.player.choices.edited = True
		return True

	def event_left(self, event):
		if self.player.choices.edited:
			self.player.choices.edited = False
		else:
			pygui_globs['menustack'].back_one_menu()
		return True

	def event_action_menu(self, event):
		self.player.choices.edited = False
		pygui_globs['menustack'].back_one_menu()
		return True

	def _do_delete(self):
		play = self.player
		play.choices.edited = False
		play.selected.vfs_delete()
		del play.choices[play.selected_pos]
		return True

	def event_stop(self, event):
		from pygui.window import ConfirmWindow
		ConfirmWindow(_('Remove item(s) from playlist?'), confirm_action=self._do_delete).show()
		return True



# Event handler for the TV favorite editor. Toggling is more or less
# messed up there, so it's disabled for the time being.
#
# The Select button doesn't do anything here either.
class FavoriteEditorEventHandler(PlaylistEditorEventHandler):
	
	def event_toggle_menu(self, event):
		return True

	def event_select(self, event):
		return True



