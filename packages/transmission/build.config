NAME=transmission

VERSION=2.22

DEPENDS="libevent"

URL="http://mirrors.m0k.org/transmission/files/transmission-2.22.tar.bz2"

SRCFILE="transmission-2.22.tar.bz2"

SRCDIR="transmission-2.22"

CONFIGUREFLAGS="--host=sh4-linux \
	--prefix=/wymedia/usr \
	--enable-daemon \
	--disable-nls \
	--disable-mac \
	--disable-gtk \
	--disable-libappindicator \
	--disable-libcanberra \
	--with-gnu-ld \
	LIBEVENT_CFLAGS=-I$PKGDIR/depends/libevent/libevent-2.0.11-stable/include \
	LIBEVENT_LIBS=-L$PKGDIR/depends/libevent/libevent-2.0.11-stable\ -levent"

PRE_WYBOX_PKG_BUILD() {
	mkdir -p $PKGDIR/usr/lib/share/transmission
	cp -r transmission-2.22/web $PKGDIR/usr/lib/share/transmission
}

BINARIES="transmission-daemon transmission-remote"

POST_COMPILATION() {
	sh4-linux-strip $SRCDIR/daemon/.libs/transmission-daemon
	sh4-linux-strip $SRCDIR/daemon/.libs/transmission-remote
}
