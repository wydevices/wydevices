NAME=samba

VERSION=3.5.6

URL="http://www.samba.org/samba/ftp/stable/samba-3.5.6.tar.gz"

SRCFILE="samba-3.5.6.tar.gz"

SRCDIR="samba-3.5.6/source3"

CONFIGUREFLAGS="--host=sh4-linux \
	--prefix=/wymedia/usr \
	--with-privatedir=/wymedia/usr/var/lib/samba/private \
	--with-lockdir=/wymedia/usr/var/lib/samba \
	--with-piddir=/var/run \
	--with-configdir=/wymedia/usr/etc/samba \
	--with-logfilebase=/wymedia/usr/var/log/samba \
	--disable-swat \
	--disable-cups \
	--disable-iprint \
	--disable-fam \
	--disable-avahi \
	--disable-merged-build \
	--disable-gnutls \
	--without-ldap \
	--without-ads \
	--without-cifsmount \
	--without-cifsupcall \
	--without-sys-quotas \
	--without-utmp \
	--without-cluster-support \
	--without-acl-support \
	--without-wbclient \
	--without-winbind"

PRE_WYBOX_PKG_BUILD() {
	mkdir -p $PKGDIR/usr/var/lib/samba/private
}

BINARIES="smbd nmbd smbstatus"

POST_COMPILATION() {
	sh4-linux-strip $SRCDIR/bin/libnetapi.so.0
	sh4-linux-strip $SRCDIR/bin/libsmbclient.so.0
	sh4-linux-strip $SRCDIR/bin/smbd
	sh4-linux-strip $SRCDIR/bin/nmbd
	sh4-linux-strip $SRCDIR/bin/smbstatus
}

